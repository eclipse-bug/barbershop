{"ast":null,"code":"import{useState,useEffect}from\"react\";import{motion}from\"framer-motion\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[telefon,setTelefon]=useState(\"\");const[error,setError]=useState(\"\");const[remember,setRemember]=useState(false);const navigate=useNavigate();useEffect(()=>{const localUser=JSON.parse(localStorage.getItem(\"loggedUser\"));const sessionUser=JSON.parse(sessionStorage.getItem(\"loggedUser\"));const activeUser=localUser||sessionUser;if(activeUser){window.dispatchEvent(new Event(\"userUpdated\"));navigate(\"/\");}},[navigate]);const handleLogin=async e=>{e.preventDefault();if(!telefon.trim()){setError(\"Introdu numărul de telefon.\");return;}try{const res=await fetch(\"http://localhost/barbershop/backend/api/login_client.php\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({telefon})});const data=await res.json();if(data.success){const user=data.user;if(remember){localStorage.setItem(\"loggedUser\",JSON.stringify(user));}else{sessionStorage.setItem(\"loggedUser\",JSON.stringify(user));}window.dispatchEvent(new Event(\"userUpdated\"));alert(\"Bun venit, \".concat(user.prenume,\" \").concat(user.nume,\"!\"));navigate(\"/\");}else{setError(data.error||\"Număr de telefon inexistent!\");}}catch(err){setError(\"Eroare la conexiunea cu serverul.\");console.error(err);}};return/*#__PURE__*/_jsx(\"section\",{className:\"min-h-screen flex items-center justify-center bg-[#0f0f0f] text-white\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:0.6},className:\"bg-black/40 backdrop-blur-md border border-[#d4af37]/30 rounded-2xl p-10 w-full max-w-md shadow-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-[#d4af37] mb-6\",children:\"Autentificare Client\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-300 mb-2\",children:\"Num\\u0103r de telefon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:telefon,onChange:e=>{setTelefon(e.target.value);setError(\"\");},placeholder:\"076784211 sau +37376784211\",pattern:\"^(\\\\+373\\\\d{8}|0\\\\d{8})$\",title:\"Folose\\u0219te formatul 076784211 sau +37376784211\",className:\"w-full bg-transparent border \".concat(error?\"border-red-500 focus:border-red-500\":\"border-[#d4af37]/30 focus:border-[#d4af37]\",\" text-white rounded-md px-4 py-2 focus:outline-none transition\")}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm mt-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer select-none\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:remember,onChange:()=>setRemember(!remember),className:\"accent-[#d4af37] w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"\\u021Aine-m\\u0103 minte\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"text-[#d4af37] hover:underline transition\",children:\"\\xCEnregistreaz\\u0103-te\"})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},type:\"submit\",className:\"w-full mt-5 bg-[#d4af37] text-black font-semibold py-3 rounded-md hover:bg-transparent hover:text-[#d4af37] border border-[#d4af37] transition duration-300\",children:\"Autentific\\u0103-te\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-400 text-xs mt-8\",children:\"\\xA9 2025 Denis Barbershop. Toate drepturile rezervate.\"})]})});}","map":{"version":3,"names":["useState","useEffect","motion","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","telefon","setTelefon","error","setError","remember","setRemember","navigate","localUser","JSON","parse","localStorage","getItem","sessionUser","sessionStorage","activeUser","window","dispatchEvent","Event","handleLogin","e","preventDefault","trim","res","fetch","method","headers","body","stringify","data","json","success","user","setItem","alert","concat","prenume","nume","err","console","className","children","div","initial","opacity","y","animate","transition","duration","onSubmit","type","value","onChange","target","placeholder","pattern","title","checked","href","button","whileHover","scale","whileTap"],"sources":["C:/wamp64/www/barbershop/frontend/src/pages/Login.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n  const [telefon, setTelefon] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [remember, setRemember] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const localUser = JSON.parse(localStorage.getItem(\"loggedUser\"));\r\n    const sessionUser = JSON.parse(sessionStorage.getItem(\"loggedUser\"));\r\n    const activeUser = localUser || sessionUser;\r\n\r\n    if (activeUser) {\r\n      window.dispatchEvent(new Event(\"userUpdated\"));\r\n      navigate(\"/\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!telefon.trim()) {\r\n      setError(\"Introdu numărul de telefon.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost/barbershop/backend/api/login_client.php\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ telefon }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        const user = data.user;\r\n\r\n        if (remember) {\r\n          localStorage.setItem(\"loggedUser\", JSON.stringify(user));\r\n        } else {\r\n          sessionStorage.setItem(\"loggedUser\", JSON.stringify(user));\r\n        }\r\n\r\n        window.dispatchEvent(new Event(\"userUpdated\"));\r\n        alert(`Bun venit, ${user.prenume} ${user.nume}!`);\r\n        navigate(\"/\");\r\n      } else {\r\n        setError(data.error || \"Număr de telefon inexistent!\");\r\n      }\r\n    } catch (err) {\r\n      setError(\"Eroare la conexiunea cu serverul.\");\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"min-h-screen flex items-center justify-center bg-[#0f0f0f] text-white\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 40 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n        className=\"bg-black/40 backdrop-blur-md border border-[#d4af37]/30 rounded-2xl p-10 w-full max-w-md shadow-lg\"\r\n      >\r\n        <h2 className=\"text-3xl font-bold text-center text-[#d4af37] mb-6\">\r\n          Autentificare Client\r\n        </h2>\r\n\r\n        <form onSubmit={handleLogin} className=\"space-y-6\">\r\n          {/* Telefon */}\r\n          <div>\r\n            <label className=\"block text-sm text-gray-300 mb-2\">\r\n              Număr de telefon\r\n            </label>\r\n            <input\r\n              type=\"tel\"\r\n              value={telefon}\r\n              onChange={(e) => {\r\n                setTelefon(e.target.value);\r\n                setError(\"\");\r\n              }}\r\n              placeholder=\"076784211 sau +37376784211\"\r\n              pattern=\"^(\\+373\\d{8}|0\\d{8})$\"\r\n              title=\"Folosește formatul 076784211 sau +37376784211\"\r\n              className={`w-full bg-transparent border ${\r\n                error\r\n                  ? \"border-red-500 focus:border-red-500\"\r\n                  : \"border-[#d4af37]/30 focus:border-[#d4af37]\"\r\n              } text-white rounded-md px-4 py-2 focus:outline-none transition`}\r\n            />\r\n            {error && <p className=\"text-red-500 text-xs mt-1\">{error}</p>}\r\n          </div>\r\n\r\n          {/* Remember me */}\r\n          <div className=\"flex items-center justify-between text-sm mt-3\">\r\n            <label className=\"flex items-center gap-2 cursor-pointer select-none\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={remember}\r\n                onChange={() => setRemember(!remember)}\r\n                className=\"accent-[#d4af37] w-4 h-4\"\r\n              />\r\n              <span className=\"text-gray-300\">Ține-mă minte</span>\r\n            </label>\r\n\r\n            <a\r\n              href=\"/register\"\r\n              className=\"text-[#d4af37] hover:underline transition\"\r\n            >\r\n              Înregistrează-te\r\n            </a>\r\n          </div>\r\n\r\n          {/* Buton Login */}\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            type=\"submit\"\r\n            className=\"w-full mt-5 bg-[#d4af37] text-black font-semibold py-3 rounded-md hover:bg-transparent hover:text-[#d4af37] border border-[#d4af37] transition duration-300\"\r\n          >\r\n            Autentifică-te\r\n          </motion.button>\r\n        </form>\r\n\r\n        <p className=\"text-center text-gray-400 text-xs mt-8\">\r\n          © 2025 Denis Barbershop. Toate drepturile rezervate.\r\n        </p>\r\n      </motion.div>\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}